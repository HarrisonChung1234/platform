(function(){"use strict";var e={8359:function(e,t,a){var r=a(7195),o=a(5114),i=a.n(o),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},n=[],l={name:"App"},c=l,u=a(1001),p=(0,u.Z)(c,s,n,!1,null,null,null),d=p.exports,h=a(2241),m=a(408);a(7658);const g=()=>{const e=[{path:"/",name:"home",label:"首页",icon:"s-home",url:"Home/Home"}],t=localStorage.getItem("crumbList");return t?JSON.parse(t):e},f=e=>{localStorage.setItem("crumbList",JSON.stringify(e))};var v={state:{isCollapse:!1,tabsList:g()},mutations:{collapseMenu(e){e.isCollapse=!e.isCollapse},selectMenu(e,t){const a=e.tabsList.findIndex((e=>e.name===t.name));while(1!=e.tabsList.length)e.tabsList.pop();0!==a&&e.tabsList.push(t)},pushCrumb(e,t){const a=e.tabsList.findIndex((e=>e.name===t.name));if(a<0){if("detect"==t.name){const t=e.tabsList.findIndex((e=>"train"===e.name));t>0&&e.tabsList.pop()}if("train"==t.name){const t=e.tabsList.findIndex((e=>"detect"===e.name));t>0&&e.tabsList.pop()}e.tabsList.push(t)}},saveCrumb(e){f(e.tabsList)}}},b=a(2746);const y=()=>{const e={cookie:""},t=b.Z.get("token");return t?{cookie:t}:e},_=e=>{b.Z.set("token",e.cookie)},w=()=>{b.Z.remove("token")};var k={namespaced:!0,state(){return{userInfo:y()}},mutations:{setUserInfo(e,t){e.userInfo=t,_(t)},removeUserInfo(e){e.userInfo="",w()}},actions:{},getters:{}};r["default"].use(m.ZP);var C=new m.ZP.Store({modules:{tab:v,user:k}}),x=function(){var e=this,t=e._self._c;return t("div",{staticClass:"file-manager"},[t("el-button",{attrs:{type:"primary",round:""},on:{click:e.openUpload}},[e._v("上传文件"),t("i",{staticClass:"el-icon-upload el-icon--right"})]),t("el-button",{staticStyle:{"margin-left":"2%"},attrs:{round:""},on:{click:function(t){return e.toggleSelection()}}},[e._v("取消选择"),t("i",{staticClass:"el-icon-circle-close el-icon--right"})]),t("el-button",{staticStyle:{"margin-left":"2%"},attrs:{round:"",type:"danger"},on:{click:e.deleteFile}},[e._v("删除选定"),t("i",{staticClass:"el-icon-delete el-icon--right"})]),t("el-dialog",{attrs:{title:"上传文件",visible:e.uploadVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.uploadVisible=t}}},[t("el-form",[t("el-form-item",{attrs:{label:"数据集名称",required:""}},[t("el-input",{attrs:{placeholder:"默认为文件名"},model:{value:e.customName,callback:function(t){e.customName=t},expression:"customName"}})],1)],1),t("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",action:"string","file-list":e.uploadList,"auto-upload":!1,"on-remove":e.handleRemove,"on-change":e.handleChange,accept:".zip"}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传单个zip文件")])]),t("transition",{attrs:{name:"fade"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.progressBarShow,expression:"progressBarShow"}],staticClass:"progressBar",staticStyle:{"margin-top":"2px"}},[null==e.uploadStatus?t("el-progress",{attrs:{"text-inside":!0,"stroke-width":20,percentage:e.uploadProgress}}):t("el-progress",{attrs:{"text-inside":!0,"stroke-width":20,percentage:e.uploadProgress,status:e.uploadStatus}})],1)]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.uploadVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitUpload}},[e._v("上 传")])],1)],1),t("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-top":"2%"},attrs:{data:e.tableData.filter((t=>!e.search||t.name.toLowerCase().includes(e.search.toLowerCase()))),"tooltip-effect":"dark","default-sort":{prop:"date",order:"descending"}},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"100%"}}),t("el-table-column",{attrs:{type:"index","min-width":"20%"}}),t("el-table-column",{attrs:{label:"文件名","min-width":"20%","show-overflow-tooltip":"",sortable:"","sort-method":e.sortByName},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),t("el-table-column",{attrs:{label:"操 作","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.goToMark(a.row.name)}}},[e._v("标注 |")]),t("a",{attrs:{href:"javascript:;"}},[e._v(" 清洗 |")]),t("a",{attrs:{href:"javascript:;"}},[e._v(" 增广")])]}}])}),t("el-table-column",{attrs:{label:"大 小","min-width":"20%",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.size))]}}])}),t("el-table-column",{attrs:{align:"right","min-width":"20%"},scopedSlots:e._u([{key:"header",fn:function(a){return[t("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}}])})],1)],1)},I=[],F=a(8428),S=a.n(F),$=a(1273);const B=102400;var D,L,P={data(){return{uploadVisible:!1,uploadList:[],customName:"",fileName:"",tableData:[],selectedFiles:[],search:"",deleteList:[],uploadProgress:0,uploadStatus:null,progressBarShow:!1}},mounted(){this.fetchData()},methods:{openUpload(){this.uploadVisible=!0,this.uploadList=[],this.customName="",this.clearBarStatus()},handleClose(e){this.$confirm("确认关闭？你的文件可能还没有上传成功。").then((t=>{e()})).catch((e=>{}))},handleRemove(e,t){this.customName="",this.clearBarStatus(),$.log("刚才删除的文件：",e,t)},handleChange(e,t){this.progressBarShow=!0,this.uploadProgress=0,this.customName=e.name.split(".")[0],this.uploadList=t,t.length>1&&"fail"!==e.status?t.splice(0,1):"fail"===e.status&&(errorMsg("上传失败，请重新上传！"),t.splice(0,1))},createChunk(e){const t=[],a=Math.ceil(e.size/B);var r=0,o=0;for(o;r<a;r+=1,o+=B)t.push({file:e.slice(o,o+B),idx:r,name:e.name,num:a});return t},uploadChunk(e,t){const a=new FormData,r={proc_type:"upload_db",chunk_idx:e.idx,filename:this.customName,num:e.num};return a.append("file",e.file),a.append("meta",JSON.stringify(r)),S().post("http://127.0.0.1:5000/Dataset/upload",a,{headers:{Authorization:"Bearer "+b.Z.get("token"),"Content-Type":"application/x-www-form-urlencoded"},onUploadProgress:t}).then((t=>($.log(e.idx,"上传成功",t),t))).catch((t=>{throw $.log(e.idx,"上传失败",t),t}))},submitUpload(){var e=this.uploadList[0].raw,t=this.createChunk(e),a=t.length,r=0,o=e=>{this.uploadProgress=Math.round(r/a*100)},i=t.map((e=>this.uploadChunk(e,o).then((()=>{r++}))));Promise.all(i).then((()=>{this.uploadStatus="success",this.fetchData(),this.uploadVisible=!1,this.$message({message:"文件上传成功",type:"success",offset:100}),setTimeout((()=>{this.clearBarStatus()}),3e3)})).catch((e=>{$.error("Error uploading chunks:",e),this.uploadStatus="exception",this.uploadVisible=!1}))},clearBarStatus(){this.progressBarShow=!1,this.uploadProgress=0,this.uploadStatus=null},sortByName(e,t){let a=e.name,r=t.name;return a-r},toggleSelection(e){e?e.forEach((e=>{this.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange(e){this.deleteList=e.map((e=>e.name)),this.multipleSelection=e},fetchData(){this.tableData=[];var e=["79097 kb","17000 kb","153634 kb","240217 kb","112640 kb"];$.log("fetch");let t="http://127.0.0.1:5000/Dataset/user";S().get(t,{headers:{Authorization:"Bearer "+b.Z.get("token")}}).then((t=>{for(var a=0;a<t.data.info.length;++a)this.tableData.push({name:t.data.info[a],size:e[a],num:Math.floor(480*Math.random())+20})}))},goToMark(e){this.$router.push("/markpic");const t=new FormData;t.append("dataset_name",e);let a="http://127.0.0.1:5000/Dataset/load";S().post(a,t,{headers:{Authorization:"Bearer "+b.Z.get("token")}}).then((t=>{$.log("load result: ",t),$.log("formdata: ",e)})).catch((e=>{$.log(e)}))},sendDelete(e){const t=new FormData;let a="http://127.0.0.1:5000/Dataset/delete";return t.append("dataset_name",e),S().post(a,t,{headers:{Authorization:"Bearer "+b.Z.get("token")}}).then((e=>($.log(e),e))).catch((e=>($.log(e),e)))},deleteFile(){0==this.deleteList.length?this.$alert("还未选择任何需要删除的数据集","提示",{confirmButtonText:"确定",type:"warning"}):this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var e=this.deleteList.map((e=>this.sendDelete(e)));Promise.all(e).then((()=>{$.log("All delete operations completed successfully"),this.fetchData()})).catch((e=>{$.error("Error in delete operations:",e)})),this.$message({type:"success",message:"删除成功!",offset:100})})).catch((()=>{this.$message({type:"info",message:"已取消删除",offset:100})}))}}},T=P,z=(0,u.Z)(T,x,I,!1,null,"6525c1e0",null),O=z.exports,N=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{ref:"login",staticClass:"box login"},[t("h1",[e._v("登录")]),t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"label-position":"top","label-width":"100px",rules:e.rules,model:e.rulesForm,"status-icon":""}},[t("el-form-item",{attrs:{label:"用户名",prop:"name"}},[t("el-input",{attrs:{type:"text"},model:{value:e.rulesForm.name,callback:function(t){e.$set(e.rulesForm,"name",t)},expression:"rulesForm.name"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitLogin.apply(null,arguments)}},model:{value:e.rulesForm.password,callback:function(t){e.$set(e.rulesForm,"password",t)},expression:"rulesForm.password"}})],1),t("div",{staticStyle:{"text-align":"center","margin-top":"20%","margin-bottom":"3%"}},[t("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.submitLogin}},[e._v("Submit")])],1),t("p",{staticStyle:{"text-align":"center"}},[e._v("还没有账号？"),t("a",{attrs:{href:"javascript:;"},on:{click:e.goToRegister}},[e._v("去注册")])])],1)],1),t("div",{ref:"register",staticClass:"box register"},[t("h1",[e._v("注册")]),t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"label-position":"top","label-width":"100px",rules:e.rules,model:e.rulesForm,"status-icon":""}},[t("el-form-item",{attrs:{label:"用户名",prop:"name"}},[t("el-input",{attrs:{type:"text"},model:{value:e.rulesForm.name,callback:function(t){e.$set(e.rulesForm,"name",t)},expression:"rulesForm.name"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password"},model:{value:e.rulesForm.password,callback:function(t){e.$set(e.rulesForm,"password",t)},expression:"rulesForm.password"}})],1),t("div",{staticStyle:{"text-align":"center","margin-top":"20%","margin-bottom":"3%"}},[t("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.submitRegister,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitRegister.apply(null,arguments)}}},[e._v("Submit")])],1),t("p",{staticStyle:{"text-align":"center"}},[e._v("已经有账号了？"),t("a",{attrs:{href:"javascript:;"},on:{click:e.goToLogin}},[e._v("去登录")])])],1)],1)])},Z=[],M={data(){return{rulesForm:{name:"",password:""},rules:{name:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,max:15,message:"长度在1到12",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"长度在6到15",trigger:"blur"}]}}},methods:{goToRegister(){this.$refs.login.style.transform="rotateY(180deg)",this.$refs.register.style.transform="rotateY(0deg)"},goToLogin(){this.$refs.register.style.transform="rotateY(-180deg)",this.$refs.login.style.transform="rotateY(0deg)"},submitLogin(){S().post("http://127.0.0.1:5000/User/login",{username:this.rulesForm.name,password:this.rulesForm.password}).then((e=>{this.$message({message:e.data.message,type:"success"}),b.Z.set("token",e.data.token);const t=b.Z.get("token");this.$store.commit("user/setUserInfo",{cookie:t}),this.$router.push("/user")})).catch((e=>{this.$message.error(e.response.data.error)}))},submitRegister(){S().post("http://127.0.0.1:5000/User/register",{username:this.rulesForm.name,password:this.rulesForm.password}).then((e=>{this.$message({message:e.data.message,type:"success"})})).catch((e=>{this.$message.error(e.response.data.error)}))}}},j=M,U=(0,u.Z)(j,N,Z,!1,null,null,null),A=U.exports,R=function(){var e=this,t=e._self._c;return t("div",[t("el-container",[t("el-aside",{attrs:{width:"auto"}},[t("CommonAside")],1),t("el-container",[t("el-header",[t("CommonHeader")],1),t("el-main",[t("router-view")],1)],1)],1)],1)},H=[],E=function(){var e=this,t=e._self._c;return t("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.$route.path,collapse:e.isCollapse,"background-color":"#2b262d","text-color":"#fff"},on:{open:e.handleOpen,close:e.handleClose}},[t("h3",[e._v(e._s(e.isCollapse?"选项":"中大工业视觉服务平台"))]),e._l(e.noChildren,(function(a){return t("el-menu-item",{key:a.name,attrs:{index:a.path},on:{click:function(t){return e.clickMenu(a)}}},[t("i",{class:`el-icon-${a.icon}`}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(a.label))])])}))],2)},V=[],q={data(){return{menuData:[{path:"/user",name:"user",label:"用户数据",icon:"user",url:"UserManage/UserManage"},{path:"/instruction",name:"instruction",label:"测试页面",icon:"help",url:"Help/Help"},{path:"/model",name:"page3",label:"模型使用",icon:"setting",url:"Other/PageThree"},{path:"/xiba",name:"xiba",label:"数据清洗",icon:"brush",url:"Other/PageThree"},{path:"/loma",name:"loma",label:"数据增广",icon:"magic-stick",url:"Other/PageThree"},{path:"/kesagi",name:"kesagi",label:"联系我们",icon:"phone-outline",url:"Other/PageThree"}]}},methods:{handleOpen(e,t){},handleClose(e,t){},clickMenu(e){this.$route.path===e.path||"/home"===this.$route.path&&"/"===e.path||this.$router.push(e.path),this.$store.commit("selectMenu",e),this.$store.commit("saveCrumb")}},computed:{noChildren(){return this.menuData.filter((e=>!e.children))},hasChildren(){return this.menuData.filter((e=>e.children))},isCollapse(){return this.$store.state.tab.isCollapse}}},W=q,J=(0,u.Z)(W,E,V,!1,null,"428f750a",null),Y=J.exports,X=function(){var e=this,t=e._self._c;return t("div",{staticClass:"header"},[t("div",{staticClass:"l-c"},[e.isCollapse?t("el-button",{staticStyle:{"margin-right":"20px"},attrs:{icon:"el-icon-caret-right",size:"mini"},on:{click:e.handleMenu}}):t("el-button",{staticStyle:{"margin-right":"20px"},attrs:{icon:"el-icon-caret-left",size:"mini"},on:{click:e.handleMenu}}),t("el-breadcrumb",{attrs:{separator:"/"}},e._l(e.tags,(function(a){return t("el-breadcrumb-item",{key:a.path,attrs:{to:{path:a.path}}},[e._v(e._s(a.label))])})),1)],1),t("div",{staticClass:"r-c"},[e.isLogin?t("el-dropdown",[t("span",{staticClass:"el-dropdown-link"},[t("img",{staticClass:"user",attrs:{src:a(4353)}})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{nativeOn:{click:function(t){return e.jumpUser.apply(null,arguments)}}},[e._v("个人中心")]),t("el-dropdown-item",{nativeOn:{click:function(t){return e.logOut.apply(null,arguments)}}},[e._v("退出登录")])],1)],1):t("el-button",{attrs:{size:"small",plain:""},on:{click:e.jumpLogin}},[e._v("登录")])],1)])},G=[],K={data(){return{}},methods:{handleMenu(){this.$store.commit("collapseMenu")},jumpUser(){this.$router.push("/user")},jumpLogin(){this.$router.push("/login")},logOut(){this.$store.commit("user/removeUserInfo"),this.$router.push("/login"),this.$notify.info({title:"消息",message:"您已退出登录",position:"bottom-right"})}},computed:{...(0,m.rn)({isCollapse:e=>e.tab.isCollapse,tags:e=>e.tab.tabsList,isLogin:e=>e.user.userInfo.cookie})}},Q=K,ee=(0,u.Z)(Q,X,G,!1,null,"f1b20b8a",null),te=ee.exports,ae={data(){return{}},components:{CommonAside:Y,CommonHeader:te}},re=ae,oe=(0,u.Z)(re,R,H,!1,null,"274abd62",null),ie=oe.exports,se={},ne=(0,u.Z)(se,D,L,!1,null,null,null),le=ne.exports,ce=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-page"},[t("div",{staticClass:"pics"},[t("div",{staticClass:"arrow arrow-left",on:{click:function(t){return e.showMore("down")}}}),t("div",{staticClass:"pic-container"},[t("div",{ref:"picContainer",staticClass:"pic-box"},e._l(e.pics,(function(a,r){return t("div",{key:r,staticClass:"pic"},[t("div",{staticClass:"info",style:{"background-image":"url("+a.url+")"},on:{click:function(t){return e.activePic(a.url,a.id,r)}}})])})),0)]),t("div",{staticClass:"arrow arrow-right",on:{click:function(t){return e.showMore("up")}}})]),t("el-row",{staticClass:"tagList",attrs:{gutter:10,type:"flex"}},[t("draggable",{attrs:{distanceRight:e.rightDistance,distanceBottom:e.bottomDistance,isScrollHidden:!1,isCanDraggable:!0,zIndex:100}},[t("div",[t("el-container",{staticClass:"custom-container"},[t("el-row",{staticClass:"button-row",attrs:{type:"flex"}},[t("el-col",[t("el-button",{directives:[{name:"popover",rawName:"v-popover:popover1",arg:"popover1"}],staticClass:"vertical-button",attrs:{type:"primary",icon:"el-icon-picture",size:"small"},on:{click:e.handleFileInputClick}}),t("el-popover",{ref:"popover1",attrs:{trigger:"hover",placement:"top",width:"50"}},[t("p",[e._v("选择图片")])]),t("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.handleFileChange}})],1),t("el-col",[t("el-button",{directives:[{name:"popover",rawName:"v-popover:popover2",arg:"popover2"}],staticClass:"vertical-button",attrs:{type:"primary",icon:"el-icon-upload",size:"small"},on:{click:e.uploadFile}}),t("el-popover",{ref:"popover2",attrs:{trigger:"hover",placement:"top",width:"50"}},[t("p",[e._v("上传图片")])])],1),t("el-col",[t("el-button",{directives:[{name:"popover",rawName:"v-popover:popover3",arg:"popover3"}],staticClass:"vertical-button",attrs:{type:"primary",icon:"el-icon-delete",size:"small"},on:{click:e.delPic}}),t("el-popover",{ref:"popover3",attrs:{trigger:"hover",placement:"top",width:"50"}},[t("p",[e._v("删除图片")])])],1)],1),t("el-row",{staticClass:"button-row",attrs:{type:"flex"}},[t("el-col",[t("el-button",{directives:[{name:"popover",rawName:"v-popover:popover4",arg:"popover4"}],staticClass:"vertical-button",attrs:{type:"primary",icon:"el-icon-full-screen",size:"small"},on:{click:e.addTag}}),t("el-popover",{ref:"popover4",attrs:{trigger:"hover",placement:"top",width:"50"}},[t("p",[e._v("新增标签类别")])])],1),t("el-col",[t("el-button",{directives:[{name:"popover",rawName:"v-popover:popover5",arg:"popover5"}],staticClass:"vertical-button",attrs:{type:"primary",icon:"el-icon-circle-check",size:"small"},on:{click:e.submitForm}}),t("el-popover",{ref:"popover5",attrs:{trigger:"hover",placement:"top",width:"50"}},[t("p",[e._v("确认标注")])])],1),t("el-col",[t("el-button",{directives:[{name:"popover",rawName:"v-popover:popover6",arg:"popover6"}],staticClass:"vertical-button",attrs:{type:"primary",icon:"el-icon-folder-checked",size:"small"},on:{click:e.saveAnno}}),t("el-popover",{ref:"popover6",attrs:{trigger:"hover",placement:"top",width:"50"}},[t("p",[e._v("保存标注")])])],1)],1)],1)],1)]),t("el-col",{staticClass:"thirdPart",attrs:{span:12}},[t("div",{staticClass:"height-control"},[t("ui-marker",{ref:"aiPanel-editor",staticClass:"ai-observer",attrs:{uniqueKey:e.currentInfo.uuid,ratio:e.currentInfo.rawW/e.currentInfo.rawH,imgUrl:e.currentInfo.currentBaseImage},on:{"vmarker:selectOne":e.selectOne,"vmarker:onUpdated":e.onUpdated,"vmarker:onDrawOne":e.onDrawOne,"vmarker:onReady":e.onReady,"vmarker:onImageLoad":e.onImageLoad}})],1)]),t("el-col",{staticClass:"firstPart",attrs:{span:7}},[t("div",{staticClass:"img-container"},[t("img",{staticClass:"limited-image",attrs:{src:e.currentInfo.currentBaseImage}}),t("canvas",{attrs:{id:"anno_canvas",width:e.currentInfo.rawW,height:e.currentInfo.rawH}}),t("canvas",{attrs:{id:"highlighted",width:e.currentInfo.rawW,height:e.currentInfo.rawH}})])]),t("el-col",{staticClass:"secondPart",attrs:{span:5}},[t("el-button",{staticClass:"save-button",attrs:{type:"success"},on:{click:e.saveAll}},[e._v("保存")]),t("div",{staticClass:"title"},[e._v("标签栏")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tags,"max-height":"200",border:"","show-header":!1}},[t("el-table-column",{attrs:{label:"类别",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{size:"small"},on:{click:function(t){return e.setTag(a.row)}}},[e._v(e._s(a.row.tagName))])]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.delTag(a.$index,a.row.tag)}}})]}}])})],1),t("div",{staticClass:"title"},[e._v("标注信息")]),t("div",{staticClass:"annos"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.currentInfo.data,"max-height":"300",border:""}},[t("el-table-column",{attrs:{label:"id",width:"50"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(a.$index+1))])]}}])}),t("el-table-column",{attrs:{label:"类别",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{attrs:{trigger:"hover",placement:"top"}},[t("p",[e._v("左上角x: "+e._s(a.row.x_ul))]),t("p",[e._v("左上角y: "+e._s(a.row.y_ul))]),t("p",[e._v("宽度w: "+e._s(a.row.wid))]),t("p",[e._v("高度h: "+e._s(a.row.hei))]),t("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t("el-tag",{attrs:{size:"medium"}},[e._v(e._s(a.row.tag_name))])],1)])]}}])}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.highlight(a.row.id)}}},[e._v("查看")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.del_anno(a.row.id)}}},[e._v("删除")])]}}])})],1)],1)],1)],1),t("el-dialog",{attrs:{width:"30%",title:"添加标签",visible:e.innerVisible,"before-close":e.beforeClose},on:{"update:visible":function(t){e.innerVisible=t}}},[t("el-form",{ref:"innerForm",attrs:{model:e.innerForm,rules:e.tep_rules}},[t("el-form-item",{attrs:{label:"标签名称：",prop:"tagName"}},[t("el-input",{model:{value:e.innerForm.tagName,callback:function(t){e.$set(e.innerForm,"tagName",t)},expression:"innerForm.tagName"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.close}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createForm("innerForm")}}},[e._v(" 确 定 ")])],1)],1)],1)},ue=[],pe=(a(6229),a(7330),a(2062),a(1933)),de=a(2532),he=a.n(de),me=a(2920),ge=a.n(me),fe=a(1273),ve={name:"stagePicPage",components:{"ui-marker":pe.AIMarker,"file-upload":he(),Draggable:ge()},data(){return{modified:!1,already:!1,rightDistance:0,bottomDistance:0,loading_src:"https://image.uisdc.com/wp-content/uploads/2015/05/load20150504-5.gif",already_src:"https://trademark.zbjimg.com/pattern-prod/2017/image_53/27078207.jpg",highlight_id:0,selectedFile:null,currentInfo:{currentBaseImage:"https://image.uisdc.com/wp-content/uploads/2015/05/load20150504-5.gif",rawW:1200,rawH:828,currentW:1134,currentH:632,uuid:"",data:[]},pics:[],altURL:"https://img-qn.51miz.com/2018/02/08/06/2018020806948082_P1330830_60ced2dfO.jpg",active:0,picTotal:10,tags:[],allInfo:[],imageInfo:[],innerVisible:!1,innerForm:{tagName:"",tag:""},tep_rules:{tagName:[{required:!0,message:"请输入",trigger:"blur"}],tag:[{required:!0,message:"请输入",trigger:"blur"}]}}},computed:{},created(){this.init_pics()},mounted(){window.addEventListener("beforeunload",this.leaveconfirm,!1);const e=window.innerWidth,t=window.innerHeight;this.rightDistance=.65*e,this.bottomDistance=.08*t},beforeDestroy(){window.addEventListener("beforeunload",this.leaveconfirm,!1)},beforeRouteLeave(e,t,a){this.modified?this.$confirm("当前信息未保存，离开页面将会放弃所有修改数据，","提示",{closeOnClickModal:!1,confirmButtonText:"保存",cancelButtonText:"保存",type:"warning"}).then((()=>{a()})).catch((()=>{})):a()},methods:{leaveconfirm(e){if(this.modified)return e.preventDefault(),e.returnValue="您在页面编辑了未保存，是否确认离开","您在页面编辑了未保存，是否确认离开"},handleFileInputClick(){this.$refs.fileInput.click()},saveAll(){const e=new FormData;S().post("http://127.0.0.1:5000/Dataset/save",e,{headers:{Authorization:"Bearer "+b.Z.get("token")}}).then((e=>{fe.log("保存所有信息到后端"),this.modified=!1,this.$router.push("/user")})).catch((e=>(fe.log("保存所有信息失败",e),null)))},saveAnno(){const e=new FormData;e.append("image_id",this.currentInfo.uuid);var t=[];for(let r=0;r<this.currentInfo.data.length;r++){var a=[];a.push(this.currentInfo.data[r].x_ul),a.push(this.currentInfo.data[r].y_ul),a.push(this.currentInfo.data[r].wid),a.push(this.currentInfo.data[r].hei);let e={area:this.currentInfo.data[r].area,iscrowd:this.currentInfo.data[r].iscrowd,image_id:this.currentInfo.uuid,bbox:a,category_id:this.currentInfo.data[r].tag_id,id:this.currentInfo.data[r].id,ignore:this.currentInfo.data[r].ignore,segmentation:this.currentInfo.data[r].segmentation};t.push(e)}e.append("annotations",JSON.stringify(t)),S().post("http://127.0.0.1:5000/Dataset/workspace/modify-annotation",e,{headers:{Authorization:"Bearer "+b.Z.get("token")}}).then((e=>{fe.log("保存所有标注信息到后端成功"),this.modified=!0})).catch((e=>(fe.log("保存所有标注信息到后端失败",e),null)))},handleFileChange(e){this.selectedFile=e.target.files[0]},uploadFile(){const e=new FormData;e.append("proc_type","add"),e.append("data_type","image"),e.append("image",this.selectedFile),S().post("http://127.0.0.1:5000/Dataset/workspace/modify",e,{headers:{Authorization:"Bearer "+b.Z.get("token"),"Content-Type":"multipart/form-data"}}).then((e=>{fe.log("上传成功",e.data);var t=e.data.image_id;let a="http://127.0.0.1:5000/Dataset/workspace/image/"+t;S().get(a,{headers:{Authorization:"Bearer "+b.Z.get("token")},responseType:"blob"}).then((e=>{let a=new Blob([e.data]);fe.log(a,"BLOB");let r=URL.createObjectURL(a);this.pics.push({id:t,url:r}),fe.log("更新pics成功"),this.modified=!0})).catch((e=>(fe.log("更新pics出错",e),null)))})).catch((e=>{fe.error("上传失败",e)}))},init_pics(){S().get("http://127.0.0.1:5000/Dataset/workspace",{headers:{Authorization:"Bearer "+b.Z.get("token")}}).then((e=>{fe.log(e,"相应信息"),this.picTotal=e.data.image_count,fe.log(this.picTotal,"图片总数"),this.active=0;var t=e.data.image_ids;fe.log(t,"id列表");const a="http://127.0.0.1:5000/Dataset/workspace/image/";var r=t.map((e=>a+e));let o=e.data.categories;for(let n=0;n<o.length;n++){var i=o[n],s={tagName:i.name,tag:i.id};this.tags.push(s)}Promise.all(r.map((e=>S().get(e,{headers:{Authorization:"Bearer "+b.Z.get("token")},responseType:"blob"}).then((e=>{let t=new Blob([e.data]);fe.log(t,"BLOB");let a=URL.createObjectURL(t);return fe.log(a,"IMAGE_URL"),a})).catch((e=>(fe.log("获取图片出错",e),null)))))).then((e=>{for(let a=0;a<t.length;a++){let r=t[a],o=e[a],i={id:r,url:o};this.pics.push(i)}this.currentInfo.currentBaseImage=this.already_src,fe.log(this.pics,"pics")}))}))},highlight(e){var t=document.getElementById("highlighted"),a=t.getContext("2d");fe.log("hightlight",e),a.clearRect(0,0,t.width,t.height);for(const r of this.currentInfo.data)r.id===e&&(a.strokeStyle="yellow",a.lineWidth=4,fe.log(r.x_ul,r.y_ul,r.wid,r.hei),a.strokeRect(r.x_ul,r.y_ul,r.wid,r.hei),this.highlight_id=e)},drawBoxes(){var e=document.getElementById("anno_canvas"),t=e.getContext("2d");fe.log("drawBoxes"),t.clearRect(0,0,e.width,e.height);for(const a of this.currentInfo.data)t.strokeStyle="red",t.lineWidth=2,fe.log(a.x_ul,a.y_ul,a.wid,a.hei),t.strokeRect(a.x_ul,a.y_ul,a.wid,a.hei);fe.log(this.currentInfo.data)},del_anno(e){if(this.currentInfo.data=this.currentInfo.data.filter((t=>t.id!==e)),this.highlight_id===e){var t=document.getElementById("highlighted"),a=t.getContext("2d");a.clearRect(0,0,t.width,t.height)}this.drawBoxes(),this.modified=!0},onImageLoad(e){fe.log(e),this.imageInfo=e},onReady(){fe.log("onready")},onDrawOne(e,t){if(!this.selected.name||!this.selected.value)return this.$message.info("请先设置标签"),void this.$refs["aiPanel-editor"].getMarker().clearData();let a="请选择或添加新标签"===e.tagName?this.selected.name:e.tagName,r="请选择或添加新标签"===e.tagName?this.selected.value:e.tag;this.$refs["aiPanel-editor"].getMarker().setTag({tagName:a,tag:r}),fe.log("onDrawOne",t)},selectOne(e){fe.log("selectOne",e,this.data)},onUpdated(e,t){fe.log("onUpdated",t,e)},setTag(e){this.$refs["aiPanel-editor"].getMarker().setTag(e)},addTag(){this.innerVisible=!0,this.innerForm.tagName="",this.innerForm.tag=""},delTag(e,t){this.tags.splice(e,1);const a=new FormData;a.append("proc_type","delete"),a.append("data_type","category"),a.append("id",t),S().post("http://127.0.0.1:5000/Dataset/workspace/modify",a,{headers:{Authorization:"Bearer "+b.Z.get("token")}}).then((e=>{fe.log("删除成功",e.data),this.modified=!0})).catch((e=>{fe.error("删除失败",e)}))},close(){this.innerVisible=!1,this.$refs["innerForm"].resetFields()},beforeClose(e){this.$refs["innerForm"].resetFields(),e()},createForm(e){this.$refs[e].validate((e=>{if(e){for(let a in this.tags){let e=this.tags[a];if(e.tagName===this.innerForm.tagName)return void this.$message.warning("标签名已存在，请重新输入")}const e=new FormData;e.append("proc_type","add"),e.append("data_type","category");let t={supercategory:"none",id:0,name:this.innerForm.tagName};e.append("category",JSON.stringify(t)),fe.log(e,"传入表单数据"),S().post("http://127.0.0.1:5000/Dataset/workspace/modify",e,{headers:{Authorization:"Bearer "+b.Z.get("token")}}).then((e=>{fe.log("新增成功",e.data),this.innerForm.tag=e.data.category_id,this.tags.push({tagName:this.innerForm.tagName,tag:this.innerForm.tag}),this.modified=!0})).catch((e=>{fe.error("新增失败",e)})),this.innerVisible=!1}}))},submitForm(){fe.log(this.$refs["aiPanel-editor"]);let e=this.$refs["aiPanel-editor"].getMarker().getData();this.allInfo=e,fe.log(this.allInfo);let t={width:this.imageInfo.rawW,height:this.imageInfo.rawH};fe.log(t.width,t.height),fe.log(this.currentW,this.currentH);let a=Math.round(parseFloat(this.allInfo[0].position.x.substring(0,this.allInfo[0].position.x.length-1))*t.width/100),r=Math.round(parseFloat(this.allInfo[0].position.y.substring(0,this.allInfo[0].position.y.length-1))*t.height/100);fe.log("左上角点坐标","(",a,r,")");let o=Math.round((parseFloat(this.allInfo[0].position.x1.substring(0,this.allInfo[0].position.x1.length-1))-parseFloat(this.allInfo[0].position.x.substring(0,this.allInfo[0].position.x.length-1)))*t.width/100),i=Math.round((parseFloat(this.allInfo[0].position.y1.substring(0,this.allInfo[0].position.y1.length-1))-parseFloat(this.allInfo[0].position.y.substring(0,this.allInfo[0].position.y.length-1)))*t.height/100);fe.log(o,i,"宽度x高度");let s={id:(new Date).getTime(),tag_id:this.allInfo[0].tag,tag_name:this.allInfo[0].tagName,x_ul:a,y_ul:r,wid:o,hei:i,area:o*i,iscrowd:0,ignore:0,segmentation:[]};this.currentInfo.data.push(s),fe.log(this.currentInfo.data),this.$refs["aiPanel-editor"].getMarker().clearData(),fe.log(this.currentInfo.data),this.drawBoxes(),this.modified=!0},showMore(e){let t=this.$refs.picContainer;if("up"==e){if(this.active++,this.active>=this.picTotal-3)return void(this.active=this.pics.length-3);if(this.pics.length-3==this.active&&this.pics.length<this.picTotal)return this.photoPageIndex++,void this.getPhotos()}else this.active--,this.active<0&&(this.active=0);t.style.transform="translateX(-"+this.active/this.pics.length*100+"%)"},getPhotos(){this.$nextTick((()=>{let e=this.$refs.picContainer;e&&(e.style.width=e.scrollWidth+"px",e.style.transform="translateX(-"+this.active/this.pics.length*100+"%)")}))},activePic(e,t,a){if(this.currentInfo.currentBaseImage!=e){var r=document.getElementById("highlighted"),o=r.getContext("2d");o.clearRect(0,0,r.width,r.height),this.currentInfo.data=[],this.currentInfo.currentBaseImage=e,this.active=a,this.currentInfo.uuid=t,fe.log(this.currentInfo.uuid,"图片编号");let i="http://127.0.0.1:5000/Dataset/workspace/image-attribute/"+this.currentInfo.uuid;fe.log(i,"访问属性的url"),S().get(i,{headers:{Authorization:"Bearer "+b.Z.get("token")}}).then((e=>{this.currentInfo.rawH=e.data.image_attribute.height,this.currentInfo.rawW=e.data.image_attribute.width})).catch((e=>(fe.log(e,"获取图片长宽失败"),null))),fe.log(this.currentInfo);let s="http://127.0.0.1:5000/Dataset/workspace/annotation/"+this.currentInfo.uuid;S().get(s,{headers:{Authorization:"Bearer "+b.Z.get("token")}}).then((e=>{fe.log(e.data.annotations,"标注信息");for(let a=0;a<e.data.annotations.length;a++){let r=e.data.annotations[a];var t="";for(let e=0;e<this.tags.length;e++)if(this.tags[e].tag==r.category_id){t=this.tags[e].tagName;break}let o={id:r.id,tag_id:r.category_id,tag_name:t,x_ul:r.bbox[0],y_ul:r.bbox[1],wid:r.bbox[2],hei:r.bbox[3],area:r.area,iscrowd:r.iscrowd,ignore:r.ignore,segmentation:r.segmentation};this.currentInfo.data.push(o)}fe.log(this.currentInfo.data,"后端导入数据集成功"),this.drawBoxes()})).catch((e=>(fe.log(e,"获取图片标注信息失败"),null)))}},delPic(){if(this.active<0)alert("请先选择一张图片再进行删除");else{this.pics.splice(this.active,1),this.active=-1,this.currentInfo.currentBaseImage=this.altURL;const e=new FormData;e.append("proc_type","delete"),e.append("data_type","image"),e.append("id",this.currentInfo.uuid),S().post("http://127.0.0.1:5000/Dataset/workspace/modify",e,{headers:{Authorization:"Bearer "+b.Z.get("token")}}).then((e=>{fe.log("删除成功",e.data),this.modified=!0})).catch((e=>{fe.error("删除失败",e)}))}}}},be=ve,ye=(0,u.Z)(be,ce,ue,!1,null,"53781005",null),_e=ye.exports,we=function(){var e=this,t=e._self._c;return t("div",[t("h3",{staticStyle:{display:"inline-block"}},[e._v("选择需要使用的功能： ")]),t("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},on:{click:e.toTrain},slot:"trigger"},[e._v("训练模型")]),t("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},on:{click:e.toDetect},slot:"trigger"},[e._v("检测图片")]),t("div",[t("router-view")],1)],1)},ke=[],Ce={data(){return{}},methods:{toDetect(){this.$router.push("/model/detect"),this.$store.commit("pushCrumb",{label:"检测图片",path:"/model/detect",name:"detect"})},toTrain(){this.$router.push("/model/train"),this.$store.commit("pushCrumb",{label:"训练模型",path:"/model/train",name:"train"})}}},xe=Ce,Ie=(0,u.Z)(xe,we,ke,!1,null,null,null),Fe=Ie.exports,Se=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"container"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"label-position":"top","label-width":"100px",model:e.ruleForm,rules:e.rules,"status-icon":""}},[t("el-form-item",{staticStyle:{"margin-top":"4%"},attrs:{label:"训练集",prop:"value1"}},[t("el-select",{attrs:{placeholder:"请选择训练集"},model:{value:e.ruleForm.value1,callback:function(t){e.$set(e.ruleForm,"value1",t)},expression:"ruleForm.value1"}},e._l(e.model_name,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"模型",prop:"value2"}},[t("el-select",{attrs:{placeholder:"请选择模型"},model:{value:e.ruleForm.value2,callback:function(t){e.$set(e.ruleForm,"value2",t)},expression:"ruleForm.value2"}},e._l(e.model_type,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"测试集",prop:"value3"}},[t("el-select",{attrs:{placeholder:"请选择要检测的数据集"},model:{value:e.ruleForm.value3,callback:function(t){e.$set(e.ruleForm,"value3",t)},expression:"ruleForm.value3"}},e._l(e.p_set,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"测试集中的照片",prop:"value4"},on:{change:e.getPicList}},[t("el-select",{attrs:{disabled:0===e.p_name.length,placeholder:"请先选择要检测的数据集"},model:{value:e.ruleForm.value4,callback:function(t){e.$set(e.ruleForm,"value4",t)},expression:"ruleForm.value4"}},e._l(e.p_name,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("div",{staticStyle:{"text-align":"center","margin-top":"10%","margin-bottom":"3%"}},[t("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},on:{click:e.submitDetect},slot:"trigger"},[e._v("检测")])],1)],1)],1),t("div",{staticClass:"rcontainer"},[e.img_stream?t("div",{staticClass:"imgPart"},[t("img",{staticStyle:{width:"480px"},attrs:{src:"data:;base64,"+e.img_stream},on:{click:e.startDownload}}),t("h3",{staticStyle:{"text-align":"center"}},[e._v("点击图片即可下载标记后的图片")])]):t("div",{staticClass:"textPart"},[t("h1",{staticStyle:{"font-size":"40px"}},[e._v("检测后的图片会显示在这")])])])])},$e=[],Be=a(1273),De={data(){return{rules:{value1:[{required:!0,trigger:"change"}],value2:[{required:!0,trigger:"change"}],value3:[{required:!0,trigger:"change"}],value4:[{required:!0,trigger:"change"}]},ruleForm:{value1:"",value2:"",value3:"",value4:""},model_name:[],model_type:["yolo_v5"],p_set:[],p_name:["PCB1.jpg","PCB2.jpg","PCB3.jpg","PCB4.jpg","PCB5.jpg","PCB6.jpg","PCB7.jpg"],img_stream:"",img_url:""}},created(){S().get("http://127.0.0.1:5000/model/detect",{params:{step:"1"},headers:{Authorization:"Bearer "+b.Z.get("token"),"Content-Type":"application/json"}}).then((e=>{this.model_name=e.data,this.p_set=e.data})).catch((e=>{Be.error(e)}))},methods:{getPicList(e){S().get("http://127.0.0.1:5000/model/detect",{params:{step:"2",ds_name:e},headers:{Authorization:"Bearer "+b.Z.get("token"),"Content-Type":"application/json"}}).then((e=>{this.p_name=e.data.image_names})).catch((e=>{Be.log(e.data)}))},submitDetect(){S().post("http://127.0.0.1:5000/model/detect",{model_name:this.ruleForm.value1,model_type:this.ruleForm.value2,p_set:this.ruleForm.value3,p_name:this.ruleForm.value4},{headers:{Authorization:"Bearer "+b.Z.get("token"),"Content-Type":"application/json"}}).then((e=>{this.img_stream=e.data})).catch((e=>{Be.error(e)}))},startDownload(){var e=document.createElement("a");e.href="data:;base64,"+this.img_stream,e.download=this.ruleForm.value4,document.body.appendChild(e),e.click(),document.body.removeChild(e)}}},Le=De,Pe=(0,u.Z)(Le,Se,$e,!1,null,"b1add40c",null),Te=Pe.exports,ze=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"label-position":"top","label-width":"100px",model:e.ruleForm,rules:e.rules,"status-icon":""}},[t("el-form-item",{staticStyle:{"margin-top":"4%"},attrs:{label:"训练集",prop:"value1"}},[t("el-select",{attrs:{placeholder:"请选择训练集"},model:{value:e.ruleForm.value1,callback:function(t){e.$set(e.ruleForm,"value1",t)},expression:"ruleForm.value1"}},e._l(e.ds_name,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"模型",prop:"value2"}},[t("el-select",{attrs:{placeholder:"请选择模型"},model:{value:e.ruleForm.value2,callback:function(t){e.$set(e.ruleForm,"value2",t)},expression:"ruleForm.value2"}},e._l(e.model,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("div",{staticStyle:{"text-align":"center","margin-top":"30%","margin-bottom":"3%"}},[t("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("训练")])],1)],1)],1)},Oe=[],Ne=a(1273),Ze={data(){return{rules:{value1:[{required:!0,trigger:"change"}],value2:[{required:!0,trigger:"change"}]},ds_name:[],model:["yolo_v5"],ruleForm:{value1:"",value2:""}}},created(){S().get("http://127.0.0.1:5000/model/detect",{params:{step:"1"},headers:{Authorization:"Bearer "+b.Z.get("token"),"Content-Type":"application/json"}}).then((e=>{Ne.log(e),this.ds_name=e.data})).catch((e=>{Ne.error(e)}))},methods:{}},Me=Ze,je=(0,u.Z)(Me,ze,Oe,!1,null,"22f90c5c",null),Ue=je.exports,Ae=function(){var e=this,t=e._self._c;return t("h1",[e._v("404 不好意思妹这个页面")])},Re=[],He={data(){return{}}},Ee=He,Ve=(0,u.Z)(Ee,Ae,Re,!1,null,null,null),qe=Ve.exports;r["default"].use(h.ZP);const We=[{path:"/",component:ie,redirect:"/user",children:[{path:"login",name:"Login",component:A},{path:"user",name:"User",component:O},{path:"instruction",name:"Instruction",component:le},{path:"markpic",name:"Markpic",component:_e},{path:"model",component:Fe,redirect:"/model/train",children:[{path:"detect",component:Te,name:"Detect"},{path:"train",component:Ue,name:"Train"}]}]},{path:"*",component:qe}],Je=new h.ZP({routes:We,mode:"history"}),Ye=h.ZP.prototype.push;h.ZP.prototype.push=function(e){return Ye.call(this,e).catch((e=>e))},Je.beforeEach(((e,t,a)=>{const r=C.state.user.userInfo.cookie;r||"User"!==e.name&&"Loadpic"!==e.name&&"Markpic"!==e.name&&"Detect"!==e.name&&"Train"!==e.name||(a({name:"Login"}),(0,o.Notification)({title:"消息",message:"您还未登录",position:"bottom-right",type:"warning"})),r&&"Login"===e.name&&a({name:"User"}),a()}));var Xe=Je;r["default"].use(i()),new r["default"]({router:Xe,store:C,el:"#app",render:e=>e(d)})},4353:function(e,t,a){e.exports=a.p+"img/user.39ca555c.png"}},t={};function a(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,r,o,i){if(!r){var s=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],i=e[u][2];for(var n=!0,l=0;l<r.length;l++)(!1&i||s>=i)&&Object.keys(a.O).every((function(e){return a.O[e](r[l])}))?r.splice(l--,1):(n=!1,i<s&&(s=i));if(n){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[r,o,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,i,s=r[0],n=r[1],l=r[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(o in n)a.o(n,o)&&(a.m[o]=n[o]);if(l)var u=l(a)}for(t&&t(r);c<s.length;c++)i=s[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(u)},r=self["webpackChunkmyapp"]=self["webpackChunkmyapp"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(8359)}));r=a.O(r)})();
//# sourceMappingURL=app.91451b72.js.map